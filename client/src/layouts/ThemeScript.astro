---
/*
  This is not a layout but just a component that's used in layouts.
*/
---

<script is:inline>
	// figure out user's preferred theme and set it as html class for tailwind before paint
	function applyTheme () {
		if (typeof window !== 'undefined') {
			const isSystemColorSchemeDark = window.matchMedia(
				'(prefers-color-scheme: dark)'
			).matches;
			const storageTheme = sessionStorage.getItem('theme');

			if (!storageTheme && isSystemColorSchemeDark) {
				document.documentElement.classList.add('dark');
			} else if (storageTheme === 'dark') {
				document.documentElement.classList.add('dark');
			}
		}
	}

	document.addEventListener('astro:after-swap', applyTheme);
	document.addEventListener('astro:after-hydrate', applyTheme);
	applyTheme();
</script>
